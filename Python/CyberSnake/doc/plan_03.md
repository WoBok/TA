我现在需要你对整个项目进行彻底的重构以完成我的需求：
## 总述
我现在的贪吃蛇游戏，有场景陷阱，碰到会死，有不同类型的食物，不同的类型的食物会有不同的功能，比如会让周围的食物飞过来，身体长度减少，炸掉周围的障碍等等，还有敌人，比如幽灵飘来飘去，碰到会死，幽灵蛇，会跟你抢食物，碰到也会死，还有boss，boss会发射子弹，后续可能还会根据吃到的食物，击杀的幽灵蛇，击杀的boss等等加入音效，我还会有技能，比如幽灵模式技能，开启幽灵模式会无敌，可以穿越一切，这些是我现阶段游戏的玩法
现在的游戏有四大模块：
1. 食物，吃到不同的食物会触发不同的效果，身体增长或减少，炸掉周围物体等
2. 障碍，障碍有不同的运作方式，出现消失，随机刷出，移动等，碰到后会死亡
3. 敌人，不同的敌人类型，包括Boss，每种敌人有不同的行为模式，碰到后也会死亡，敌人也可能会发射子弹类似的能力
4. 技能，技能可能会对场景中任何物体产生影响，穿透、或者消除物体等

我需要考虑后续的扩展，比如我需要增加一种食物，增加一种障碍或者增加一种敌人，这些新增加的也可能会对其他模块产生影响，比如吃到炸弹可以将周围的物体炸掉消除，击杀幽灵蛇会将其变成食物，请给我一份详细的代码架构的设计方案，你要作为一个资深的游戏主程去考虑这些问题，要非常详细的考虑这些模块后续扩展和修改的问题，我希望能有一个固定的模板，只要按照这种规则去完成相应的设计，放到程序中就可以运行，就像热插拔，一个模块的增加和减少并不会对其他的模块产生影响，但模块和模块又可以共同对游戏产生作用
## 需求
1. 采用ECS架构
2. 采用事件总线的架构
3. 给我一份测试模板，只要我在这份模板中加入新的模块的所有修改以及对其他模块的影响，游戏就可以继续运行，实现其效果